Description,Target,Expression
# add additional fields,,
,party,trips.tour_id.map(tours.number_of_participants)
,tour_participants,"np.where(trips.trip_num == 2, 1, party)"
#,vot,trips.vot
#,vot1,vot < vot_threshold_low
#,vot2,(vot < vot_threshold_med )& (vot >= vot_threshold_low)
#,vot3,vot > vot_threshold_med
,vot1,trips.vot1
,vot2,trips.vot2
,vot3,trips.vot3
# code time periods,,
,is_5to6,(trips.depart >= 5) & (trips.depart < 7)
,is_6to7,(trips.depart >= 7) & (trips.depart < 9)
,is_7to8,(trips.depart >= 9) & (trips.depart < 11)
,is_8to9,(trips.depart >= 11) & (trips.depart < 13)
,is_9to10,(trips.depart >= 13) & (trips.depart < 15)
,is_10to14,(trips.depart >= 15) & (trips.depart < 23)
,is_14to15,(trips.depart >= 23) & (trips.depart < 25)
,is_15to16,(trips.depart >= 25) & (trips.depart < 27)
,is_16to17,(trips.depart >= 27) & (trips.depart < 29)
,is_17to18,(trips.depart >= 29) & (trips.depart < 31)
,is_18to20,(trips.depart >= 31) & (trips.depart < 35)
,is_20to5,(trips.depart < 5 ) & (trips.depart >= 35)
# FIXME  What about courtesy shuttles and other modes listed here?? ,,
,is_drivealone,"(trips.trip_mode.isin(['PARK_LOC1','PARK_LOC2','PARK_LOC3','PARK_LOC4','PARK_LOC5','RENTAL']) &  (tour_participants ==1)) | (trips.trip_mode.isin(['PARK_ESCORT','CURB_LOC1','CURB_LOC2','CURB_LOC3','CURB_LOC4','CURB_LOC5']) & (trips.trip_num == 2))"
,is_shared2,"(trips.trip_mode.isin(['PARK_LOC1','PARK_LOC2','PARK_LOC3','PARK_LOC4','PARK_LOC5','RENTAL']) & ( tour_participants ==2)) | (trips.trip_mode.isin(['RIDEHAIL_LOC1','RIDEHAIL_LOC2','TAXI_LOC1','TAXI_LOC2','PARK_ESCORT','CURB_LOC1','CURB_LOC2','CURB_LOC3','CURB_LOC4','CURB_LOC5'])  & ( tour_participants == 1) & (trips['trip_num'] ==1))"
,is_shared3,"(trips.trip_mode.isin(['PARK_LOC1','PARK_LOC2','PARK_LOC3','PARK_LOC4','PARK_LOC5','RENTAL']) &  (tour_participants >= 3)) | (trips.trip_mode.isin(['RIDEHAIL_LOC1','RIDEHAIL_LOC2','TAXI_LOC1','TAXI_LOC2','PARK_ESCORT','CURB_LOC1','CURB_LOC2','CURB_LOC3','CURB_LOC4','CURB_LOC5'])  & (tour_participants >=2) & (trips.trip_num == 1))"
,is_walk,trips.trip_mode == 'WALK'
,is_walk_transit,"trips.trip_mode.isin(['WALK_BUS', 'WALK_LR', 'WALK_CR', 'WALK_FR', 'WALK_FP'])"
,is_transit_bus,trips.trip_mode == 'WALK_BUS'
,is_transit_lr,trips.trip_mode == 'WALK_LR'
,is_transit_cr,trips.trip_mode == 'WALK_CR'
,is_transit_fr,trips.trip_mode == 'WALK_FR'
,is_transit_fp,trips.trip_mode == 'WALK_FP'
#trip legs are swapped since origin is airport and home end is destination
,outbound, ~trips.outbound
,inbound, trips.outbound
# 5to6,,
,DRIVEALONE_5to6_LOW,vot1 & is_5to6 & is_drivealone
,SHARED2_5to6_LOW,vot1 & is_5to6 & is_shared2
,SHARED3_5to6_LOW,vot1 & is_5to6 & is_shared3
,DRIVEALONE_5to6_MED,vot2 & is_5to6 & is_drivealone
,SHARED2_5to6_MED,vot2 & is_5to6 & is_shared2
,SHARED3_5to6_MED,vot2 & is_5to6 & is_shared3
,DRIVEALONE_5to6_HIGH,vot3 & is_5to6 & is_drivealone
,SHARED2_5to6_HIGH,vot3 & is_5to6 & is_shared2
,SHARED3_5to6_HIGH,vot3 & is_5to6 & is_shared3
,WALK_5to6, is_5to6 & is_walk
,WALK_BUS_5to6,is_5to6 & is_transit_bus
,WALK_LR_5to6,is_5to6 & is_transit_lr
,WALK_CR_5to6,is_5to6 & is_transit_cr
,WALK_FR_5to6,is_5to6 & is_transit_fr
,WALK_FP_5to6,is_5to6 & is_transit_fp
# 6to7,,
,DRIVEALONE_6to7_LOW,vot1 & is_6to7 & is_drivealone
,SHARED2_6to7_LOW,vot1 & is_6to7 & is_shared2
,SHARED3_6to7_LOW,vot1 & is_6to7 & is_shared3
,DRIVEALONE_6to7_MED,vot2 & is_6to7 & is_drivealone
,SHARED2_6to7_MED,vot2 & is_6to7 & is_shared2
,SHARED3_6to7_MED,vot2 & is_6to7 & is_shared3
,DRIVEALONE_6to7_HIGH,vot3 & is_6to7 & is_drivealone
,SHARED2_6to7_HIGH,vot3 & is_6to7 & is_shared2
,SHARED3_6to7_HIGH,vot3 & is_6to7 & is_shared3
,WALK_6to7, is_6to7 & is_walk
,WALK_BUS_6to7,is_6to7 & is_transit_bus
,WALK_LR_6to7,is_6to7 & is_transit_lr
,WALK_CR_6to7,is_6to7 & is_transit_cr
,WALK_FR_6to7,is_6to7 & is_transit_fr
,WALK_FP_6to7,is_6to7 & is_transit_fp
# 7to8,,
,DRIVEALONE_7to8_LOW,vot1 & is_7to8 & is_drivealone
,SHARED2_7to8_LOW,vot1 & is_7to8 & is_shared2
,SHARED3_7to8_LOW,vot1 & is_7to8 & is_shared3
,DRIVEALONE_7to8_MED,vot2 & is_7to8 & is_drivealone
,SHARED2_7to8_MED,vot2 & is_7to8 & is_shared2
,SHARED3_7to8_MED,vot2 & is_7to8 & is_shared3
,DRIVEALONE_7to8_HIGH,vot3 & is_7to8 & is_drivealone
,SHARED2_7to8_HIGH,vot3 & is_7to8 & is_shared2
,SHARED3_7to8_HIGH,vot3 & is_7to8 & is_shared3
,WALK_7to8, is_7to8 & is_walk
,WALK_BUS_7to8,is_7to8 & is_transit_bus
,WALK_LR_7to8,is_7to8 & is_transit_lr
,WALK_CR_7to8,is_7to8 & is_transit_cr
,WALK_FR_7to8,is_7to8 & is_transit_fr
,WALK_FP_7to8,is_7to8 & is_transit_fp
# 8to9,,
,DRIVEALONE_8to9_LOW,vot1 & is_8to9 & is_drivealone
,SHARED2_8to9_LOW,vot1 & is_8to9 & is_shared2
,SHARED3_8to9_LOW,vot1 & is_8to9 & is_shared3
,DRIVEALONE_8to9_MED,vot2 & is_8to9 & is_drivealone
,SHARED2_8to9_MED,vot2 & is_8to9 & is_shared2
,SHARED3_8to9_MED,vot2 & is_8to9 & is_shared3
,DRIVEALONE_8to9_HIGH,vot3 & is_8to9 & is_drivealone
,SHARED2_8to9_HIGH,vot3 & is_8to9 & is_shared2
,SHARED3_8to9_HIGH,vot3 & is_8to9 & is_shared3
,WALK_8to9, is_8to9 & is_walk
,WALK_BUS_8to9,is_8to9 & is_transit_bus
,WALK_LR_8to9,is_8to9 & is_transit_lr
,WALK_CR_8to9,is_8to9 & is_transit_cr
,WALK_FR_8to9,is_8to9 & is_transit_fr
,WALK_FP_8to9,is_8to9 & is_transit_fp
# 9to10,,
,DRIVEALONE_9to10_LOW,vot1 & is_9to10 & is_drivealone
,SHARED2_9to10_LOW,vot1 & is_9to10 & is_shared2
,SHARED3_9to10_LOW,vot1 & is_9to10 & is_shared3
,DRIVEALONE_9to10_MED,vot2 & is_9to10 & is_drivealone
,SHARED2_9to10_MED,vot2 & is_9to10 & is_shared2
,SHARED3_9to10_MED,vot2 & is_9to10 & is_shared3
,DRIVEALONE_9to10_HIGH,vot3 & is_9to10 & is_drivealone
,SHARED2_9to10_HIGH,vot3 & is_9to10 & is_shared2
,SHARED3_9to10_HIGH,vot3 & is_9to10 & is_shared3
,WALK_9to10, is_9to10 & is_walk
,WALK_BUS_9to10,is_9to10 & is_transit_bus
,WALK_LR_9to10,is_9to10 & is_transit_lr
,WALK_CR_9to10,is_9to10 & is_transit_cr
,WALK_FR_9to10,is_9to10 & is_transit_fr
,WALK_FP_9to10,is_9to10 & is_transit_fp
# 10to14,,
,DRIVEALONE_10to14_LOW,vot1 & is_10to14 & is_drivealone
,SHARED2_10to14_LOW,vot1 & is_10to14 & is_shared2
,SHARED3_10to14_LOW,vot1 & is_10to14 & is_shared3
,DRIVEALONE_10to14_MED,vot2 & is_10to14 & is_drivealone
,SHARED2_10to14_MED,vot2 & is_10to14 & is_shared2
,SHARED3_10to14_MED,vot2 & is_10to14 & is_shared3
,DRIVEALONE_10to14_HIGH,vot3 & is_10to14 & is_drivealone
,SHARED2_10to14_HIGH,vot3 & is_10to14 & is_shared2
,SHARED3_10to14_HIGH,vot3 & is_10to14 & is_shared3
,WALK_10to14, is_10to14 & is_walk
,WALK_BUS_10to14,is_10to14 & is_transit_bus
,WALK_LR_10to14,is_10to14 & is_transit_lr
,WALK_CR_10to14,is_10to14 & is_transit_cr
,WALK_FR_10to14,is_10to14 & is_transit_fr
,WALK_FP_10to14,is_10to14 & is_transit_fp
# 14to15,,
,DRIVEALONE_14to15_LOW,vot1 & is_14to15 & is_drivealone
,SHARED2_14to15_LOW,vot1 & is_14to15 & is_shared2
,SHARED3_14to15_LOW,vot1 & is_14to15 & is_shared3
,DRIVEALONE_14to15_MED,vot2 & is_14to15 & is_drivealone
,SHARED2_14to15_MED,vot2 & is_14to15 & is_shared2
,SHARED3_14to15_MED,vot2 & is_14to15 & is_shared3
,DRIVEALONE_14to15_HIGH,vot3 & is_14to15 & is_drivealone
,SHARED2_14to15_HIGH,vot3 & is_14to15 & is_shared2
,SHARED3_14to15_HIGH,vot3 & is_14to15 & is_shared3
,WALK_14to15, is_14to15 & is_walk
,WALK_BUS_14to15,is_14to15 & is_transit_bus
,WALK_LR_14to15,is_14to15 & is_transit_lr
,WALK_CR_14to15,is_14to15 & is_transit_cr
,WALK_FR_14to15,is_14to15 & is_transit_fr
,WALK_FP_14to15,is_14to15 & is_transit_fp
# 15to16,,
,DRIVEALONE_15to16_LOW,vot1 & is_15to16 & is_drivealone
,SHARED2_15to16_LOW,vot1 & is_15to16 & is_shared2
,SHARED3_15to16_LOW,vot1 & is_15to16 & is_shared3
,DRIVEALONE_15to16_MED,vot2 & is_15to16 & is_drivealone
,SHARED2_15to16_MED,vot2 & is_15to16 & is_shared2
,SHARED3_15to16_MED,vot2 & is_15to16 & is_shared3
,DRIVEALONE_15to16_HIGH,vot3 & is_15to16 & is_drivealone
,SHARED2_15to16_HIGH,vot3 & is_15to16 & is_shared2
,SHARED3_15to16_HIGH,vot3 & is_15to16 & is_shared3
,WALK_15to16, is_15to16 & is_walk
,WALK_BUS_15to16,is_15to16 & is_transit_bus
,WALK_LR_15to16,is_15to16 & is_transit_lr
,WALK_CR_15to16,is_15to16 & is_transit_cr
,WALK_FR_15to16,is_15to16 & is_transit_fr
,WALK_FP_15to16,is_15to16 & is_transit_fp
# 16to17,,
,DRIVEALONE_16to17_LOW,vot1 & is_16to17 & is_drivealone
,SHARED2_16to17_LOW,vot1 & is_16to17 & is_shared2
,SHARED3_16to17_LOW,vot1 & is_16to17 & is_shared3
,DRIVEALONE_16to17_MED,vot2 & is_16to17 & is_drivealone
,SHARED2_16to17_MED,vot2 & is_16to17 & is_shared2
,SHARED3_16to17_MED,vot2 & is_16to17 & is_shared3
,DRIVEALONE_16to17_HIGH,vot3 & is_16to17 & is_drivealone
,SHARED2_16to17_HIGH,vot3 & is_16to17 & is_shared2
,SHARED3_16to17_HIGH,vot3 & is_16to17 & is_shared3
,WALK_16to17, is_16to17 & is_walk
,WALK_BUS_16to17,is_16to17 & is_transit_bus
,WALK_LR_16to17,is_16to17 & is_transit_lr
,WALK_CR_16to17,is_16to17 & is_transit_cr
,WALK_FR_16to17,is_16to17 & is_transit_fr
,WALK_FP_16to17,is_16to17 & is_transit_fp
# 17to18,,
,DRIVEALONE_17to18_LOW,vot1 & is_17to18 & is_drivealone
,SHARED2_17to18_LOW,vot1 & is_17to18 & is_shared2
,SHARED3_17to18_LOW,vot1 & is_17to18 & is_shared3
,DRIVEALONE_17to18_MED,vot2 & is_17to18 & is_drivealone
,SHARED2_17to18_MED,vot2 & is_17to18 & is_shared2
,SHARED3_17to18_MED,vot2 & is_17to18 & is_shared3
,DRIVEALONE_17to18_HIGH,vot3 & is_17to18 & is_drivealone
,SHARED2_17to18_HIGH,vot3 & is_17to18 & is_shared2
,SHARED3_17to18_HIGH,vot3 & is_17to18 & is_shared3
,WALK_17to18, is_17to18 & is_walk
,WALK_BUS_17to18,is_17to18 & is_transit_bus
,WALK_LR_17to18,is_17to18 & is_transit_lr
,WALK_CR_17to18,is_17to18 & is_transit_cr
,WALK_FR_17to18,is_17to18 & is_transit_fr
,WALK_FP_17to18,is_17to18 & is_transit_fp
# 18to20,,
,DRIVEALONE_18to20_LOW,vot1 & is_18to20 & is_drivealone
,SHARED2_18to20_LOW,vot1 & is_18to20 & is_shared2
,SHARED3_18to20_LOW,vot1 & is_18to20 & is_shared3
,DRIVEALONE_18to20_MED,vot2 & is_18to20 & is_drivealone
,SHARED2_18to20_MED,vot2 & is_18to20 & is_shared2
,SHARED3_18to20_MED,vot2 & is_18to20 & is_shared3
,DRIVEALONE_18to20_HIGH,vot3 & is_18to20 & is_drivealone
,SHARED2_18to20_HIGH,vot3 & is_18to20 & is_shared2
,SHARED3_18to20_HIGH,vot3 & is_18to20 & is_shared3
,WALK_18to20, is_18to20 & is_walk
,WALK_BUS_18to20,is_18to20 & is_transit_bus
,WALK_LR_18to20,is_18to20 & is_transit_lr
,WALK_CR_18to20,is_18to20 & is_transit_cr
,WALK_FR_18to20,is_18to20 & is_transit_fr
,WALK_FP_18to20,is_18to20 & is_transit_fp
# 20to5,,
,DRIVEALONE_20to5_LOW,vot1 & is_20to5 & is_drivealone
,SHARED2_20to5_LOW,vot1 & is_20to5 & is_shared2
,SHARED3_20to5_LOW,vot1 & is_20to5 & is_shared3
,DRIVEALONE_20to5_MED,vot2 & is_20to5 & is_drivealone
,SHARED2_20to5_MED,vot2 & is_20to5 & is_shared2
,SHARED3_20to5_MED,vot2 & is_20to5 & is_shared3
,DRIVEALONE_20to5_HIGH,vot3 & is_20to5 & is_drivealone
,SHARED2_20to5_HIGH,vot3 & is_20to5 & is_shared2
,SHARED3_20to5_HIGH,vot3 & is_20to5 & is_shared3
,WALK_20to5, is_20to5 & is_walk
,WALK_BUS_20to5,is_20to5 & is_transit_bus
,WALK_LR_20to5,is_20to5 & is_transit_lr
,WALK_CR_20to5,is_20to5 & is_transit_cr
,WALK_FR_20to5,is_20to5 & is_transit_fr
,WALK_FP_20to5,is_20to5 & is_transit_fp
